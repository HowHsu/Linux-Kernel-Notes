<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="8531px" height="3922px" viewBox="-0.5 -0.5 8531 3922" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2022-09-27T14:21:40.100Z&quot; agent=&quot;5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/20.3.0 Chrome/104.0.5112.114 Electron/20.1.3 Safari/537.36&quot; etag=&quot;dTmwA3F2fR-ZV_1GmN5Z&quot; version=&quot;20.3.0&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;kqMuvAUNAH0QGfG08ics&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-1284-1335-272-180-0"><rect x="1284" y="1335" width="272" height="180"/></clipPath><clipPath id="mx-clip-1284-1523-272-26-0"><rect x="1284" y="1523" width="272" height="26"/></clipPath><clipPath id="mx-clip-1284-1549-272-26-0"><rect x="1284" y="1549" width="272" height="26"/></clipPath><clipPath id="mx-clip-1924-1061-632-504-0"><rect x="1924" y="1061" width="632" height="504"/></clipPath><clipPath id="mx-clip-1924-1573-632-26-0"><rect x="1924" y="1573" width="632" height="26"/></clipPath><clipPath id="mx-clip-1924-1599-632-26-0"><rect x="1924" y="1599" width="632" height="26"/></clipPath><clipPath id="mx-clip-5544-301-562-194-0"><rect x="5544" y="301" width="562" height="194"/></clipPath><clipPath id="mx-clip-5544-503-562-26-0"><rect x="5544" y="503" width="562" height="26"/></clipPath><clipPath id="mx-clip-6244-31-342-184-0"><rect x="6244" y="31" width="342" height="184"/></clipPath><clipPath id="mx-clip-6244-223-342-26-0"><rect x="6244" y="223" width="342" height="26"/></clipPath><clipPath id="mx-clip-6664-301-292-94-0"><rect x="6664" y="301" width="292" height="94"/></clipPath><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-f5f5f5-1-b3b3b3-1-s-0"><stop offset="0%" style="stop-color: rgb(245, 245, 245); stop-opacity: 1;"/><stop offset="100%" style="stop-color: rgb(179, 179, 179); stop-opacity: 1;"/></linearGradient><clipPath id="mx-clip-6664-403-292-26-0"><rect x="6664" y="403" width="292" height="26"/></clipPath><clipPath id="mx-clip-7044-301-232-114-0"><rect x="7044" y="301" width="232" height="114"/></clipPath><clipPath id="mx-clip-7044-423-232-26-0"><rect x="7044" y="423" width="232" height="26"/></clipPath><clipPath id="mx-clip-7404-301-212-26-0"><rect x="7404" y="301" width="212" height="26"/></clipPath><clipPath id="mx-clip-7404-335-212-26-0"><rect x="7404" y="335" width="212" height="26"/></clipPath><clipPath id="mx-clip-7751-301-365-264-0"><rect x="7751" y="301" width="365" height="264"/></clipPath><clipPath id="mx-clip-7751-573-365-26-0"><rect x="7751" y="573" width="365" height="26"/></clipPath><clipPath id="mx-clip-8224-301-152-44-0"><rect x="8224" y="301" width="152" height="44"/></clipPath><clipPath id="mx-clip-8224-353-152-26-0"><rect x="8224" y="353" width="152" height="26"/></clipPath><clipPath id="mx-clip-6484-541-482-194-0"><rect x="6484" y="541" width="482" height="194"/></clipPath><clipPath id="mx-clip-6484-743-482-26-0"><rect x="6484" y="743" width="482" height="26"/></clipPath><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-e6d0de-1-d5739d-1-s-0"><stop offset="0%" style="stop-color: rgb(230, 208, 222); stop-opacity: 1;"/><stop offset="100%" style="stop-color: rgb(213, 115, 157); stop-opacity: 1;"/></linearGradient><clipPath id="mx-clip-6484-769-482-26-0"><rect x="6484" y="769" width="482" height="26"/></clipPath><clipPath id="mx-clip-7424-677-732-144-0"><rect x="7424" y="677" width="732" height="144"/></clipPath><clipPath id="mx-clip-7424-829-732-26-0"><rect x="7424" y="829" width="732" height="26"/></clipPath><clipPath id="mx-clip-6834-862-302-74-0"><rect x="6834" y="862" width="302" height="74"/></clipPath><clipPath id="mx-clip-6834-944-302-26-0"><rect x="6834" y="944" width="302" height="26"/></clipPath><clipPath id="mx-clip-2834-1061-362-214-0"><rect x="2834" y="1061" width="362" height="214"/></clipPath><clipPath id="mx-clip-2834-1283-362-26-0"><rect x="2834" y="1283" width="362" height="26"/></clipPath></defs><g><path d="M 7370 90 L 7520 90 L 7520 105 L 7510 120 L 7370 120 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 7520 90 L 8530 90 L 8530 1070 L 7370 1070 L 7370 120" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 105px; margin-left: 7371px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b><font style="font-size: 18px;">vhost-vhost-user</font></b></div></div></div></foreignObject><text x="7445" y="109" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vhost-vhost-user</text></switch></g><path d="M 1190 1840 L 1320 1840 L 1320 1855 L 1310 1870 L 1190 1870 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1320 1840 L 5710 1840 L 5710 3920 L 1190 3920 L 1190 1870" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 1855px; margin-left: 1191px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b><font style="font-size: 18px;">vmm thread</font></b></div></div></div></foreignObject><text x="1255" y="1859" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vmm thread</text></switch></g><path d="M 1280 1330 L 1280 1300 L 1560 1300 L 1560 1330" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 1280 1330 L 1280 1570 L 1560 1570 L 1560 1330" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1280 1330 L 1560 1330" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="1419.5" y="1317.5">Vmm</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-1284-1335-272-180-0)" font-size="13px"><text x="1285.5" y="1348.5">    epoll: EpollContext,                                                             </text><text x="1285.5" y="1364.5">    exit_evt: EventFd,                                                           </text><text x="1285.5" y="1380.5">    reset_evt: EventFd,                                                              </text><text x="1285.5" y="1396.5">    api_evt: EventFd,                                                            </text><text x="1285.5" y="1412.5">    version: String,                                                             </text><text x="1285.5" y="1428.5">    vm: Option&lt;Vm&gt;,                                                                 </text><text x="1285.5" y="1444.5">    vm_config: Option&lt;Arc&lt;Mutex&lt;VmConfig&gt;&gt;&gt;,                                         </text><text x="1285.5" y="1460.5">    seccomp_action: SeccompAction,                                               </text><text x="1285.5" y="1476.5">    hypervisor: Arc&lt;dyn hypervisor::Hypervisor&gt;,                                     </text><text x="1285.5" y="1492.5">    activate_evt: EventFd,                                                       </text><text x="1285.5" y="1508.5">    signals: Option&lt;Handle&gt;,                                                         </text><text x="1285.5" y="1524.5">    threads: Vec&lt;thread::JoinHandle&lt;()&gt;&gt;,</text></g><path d="M 1280 1514 L 1560 1514" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="1280" y="1518" width="280" height="26" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-1284-1523-272-26-0)" font-size="12px"><text x="1285.5" y="1535.5">fn control_loop()</text></g><rect x="1280" y="1544" width="280" height="26" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-1284-1549-272-26-0)" font-size="12px"><text x="1285.5" y="1561.5">fn vm_boot()</text></g><path d="M 110 2535 L 135 2535 L 135 2565 L 153.63 2565" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 158.88 2565 L 151.88 2568.5 L 153.63 2565 L 151.88 2561.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 110 2535 L 135 2535 L 135 2565 L 153.63 2565" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 158.88 2565 L 151.88 2568.5 L 153.63 2565 L 151.88 2561.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 110 2535 L 135 2535 L 135 2515 L 153.63 2515" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 158.88 2515 L 151.88 2518.5 L 153.63 2515 L 151.88 2511.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="0" y="2520" width="110" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 2535px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">main</div></div></div></foreignObject><text x="55" y="2539" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">main</text></switch></g><path d="M 270 2565 L 310 2565 L 310 2465 L 343.63 2465" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 348.88 2465 L 341.88 2468.5 L 343.63 2465 L 341.88 2461.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 270 2565 L 315 2565 L 315 2597.57 L 353.63 2597.51" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 358.88 2597.5 L 351.89 2601.01 L 353.63 2597.51 L 351.88 2594.01 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="160" y="2550" width="110" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 2565px; margin-left: 161px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">start_vmm</div></div></div></foreignObject><text x="215" y="2569" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">start_vmm</text></switch></g><rect x="160" y="2500" width="110" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 2515px; margin-left: 161px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">create_app</div></div></div></foreignObject><text x="215" y="2519" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">create_app</text></switch></g><rect x="350" y="2450" width="200" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 2465px; margin-left: 351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">let hypervisor = hypervisor::new()</div></div></div></foreignObject><text x="450" y="2469" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">let hypervisor = hypervisor::new()</text></switch></g><path d="M 550 2605 L 595 2605 L 595 2535 L 633.63 2535" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 638.88 2535 L 631.88 2538.5 L 633.63 2535 L 631.88 2531.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="360" y="2590" width="190" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2605px; margin-left: 361px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">let vmm_thread = vmm::start_vmm_thread()</div></div></div></foreignObject><text x="455" y="2609" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">let vmm_thread = vmm::start_vmm...</text></switch></g><path d="M 545 2685 L 585 2685 L 585 2690 L 618.63 2690" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 623.88 2690 L 616.88 2693.5 L 618.63 2690 L 616.88 2686.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="355" y="2670" width="190" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2685px; margin-left: 356px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">vmm::api::vm_create()</div></div></div></foreignObject><text x="450" y="2689" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vmm::api::vm_create()</text></switch></g><path d="M 550 2795 L 623.63 2795" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 628.88 2795 L 621.88 2798.5 L 623.63 2795 L 621.88 2791.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="360" y="2780" width="190" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2795px; margin-left: 361px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">vmm::api::vm_boot()</div></div></div></foreignObject><text x="455" y="2799" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vmm::api::vm_boot()</text></switch></g><path d="M 270 2565 L 312.57 2565 L 312.57 2692.57 L 348.63 2692.51" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 353.88 2692.5 L 346.89 2696.01 L 348.63 2692.51 L 346.88 2689.01 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 270 2565 L 315 2565 L 315 2795 L 353.63 2795" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 358.88 2795 L 351.88 2798.5 L 353.63 2795 L 351.88 2791.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 830 2540 L 1020 2540 L 1020 2525 L 1203.63 2525" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1208.88 2525 L 1201.88 2528.5 L 1203.63 2525 L 1201.88 2521.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 830 2542.5 L 1020 2542.57 L 1020 2595 L 1203.63 2595" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1208.88 2595 L 1201.88 2598.5 L 1203.63 2595 L 1201.88 2591.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="640" y="2520" width="190" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2535px; margin-left: 641px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">thread::Builder::new().spawn()</div></div></div></foreignObject><text x="735" y="2539" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">thread::Builder::new().spawn()</text></switch></g><rect x="1210" y="2450" width="190" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2465px; margin-left: 1211px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">vmm = Vmm::new()</div></div></div></foreignObject><text x="1305" y="2469" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vmm = Vmm::new()</text></switch></g><path d="M 830 2535 L 830 2520 L 930 2520 L 930 2465 L 1203.63 2465" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1208.88 2465 L 1201.88 2468.5 L 1203.63 2465 L 1201.88 2461.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="1210" y="2510" width="190" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2525px; margin-left: 1211px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">vmm.setup_signal_handler()?</div></div></div></foreignObject><text x="1305" y="2529" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vmm.setup_signal_handler()?</text></switch></g><path d="M 1440 2595 L 1465 2595 L 1465 2550 L 1483.63 2550" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1488.88 2550 L 1481.88 2553.5 L 1483.63 2550 L 1481.88 2546.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="1210" y="2580" width="230" height="30" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2595px; margin-left: 1211px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">vmm.control_loop(Arc::new(api_receiver))</div></div></div></foreignObject><text x="1325" y="2599" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vmm.control_loop(Arc::new(api_receiver...</text></switch></g><rect x="1490" y="2535" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2550px; margin-left: 1491px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">let epoll_fd = self.epoll.as_raw_fd();</div></div></div></foreignObject><text x="1605" y="2554" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">let epoll_fd = self.epoll.as_raw_fd();</text></switch></g><rect x="1490" y="2625" width="380" height="110" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 378px; height: 1px; padding-top: 2680px; margin-left: 1491px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><span style="background-color: initial;">loop {</span></div>     let num_events = match epoll::wait(epoll_fd, -1, &amp;mut events[..])<br /><div style="text-align: left;">     for event in events.iter().take(num_events) {</div><div style="text-align: left;">          match dispatch_event</div><div style="text-align: left;">     }</div><div style="text-align: left;"><span style="background-color: initial;">}</span></div></div></div></div></foreignObject><text x="1680" y="2684" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">loop {     let num_events = match epoll::wait(epoll_fd, -1, &amp;mu...</text></switch></g><path d="M 1440 2595 L 1465 2595 L 1465 2680 L 1483.63 2680" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1488.88 2680 L 1481.88 2683.5 L 1483.63 2680 L 1481.88 2676.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="1970" y="2625" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2640px; margin-left: 1971px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">EpollDispatch::Exit</div></div></div></foreignObject><text x="2085" y="2644" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">EpollDispatch::Exit</text></switch></g><rect x="1970" y="2565" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2580px; margin-left: 1971px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">EpollDispatch::Unknown</div></div></div></foreignObject><text x="2085" y="2584" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">EpollDispatch::Unknown</text></switch></g><rect x="1970" y="2695" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2710px; margin-left: 1971px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">EpollDispatch::Reset</div></div></div></foreignObject><text x="2085" y="2714" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">EpollDispatch::Reset</text></switch></g><path d="M 2200 2780 L 2273.63 2780" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2278.88 2780 L 2271.88 2783.5 L 2273.63 2780 L 2271.88 2776.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="1970" y="2765" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2780px; margin-left: 1971px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">EpollDispatch::ActivateVirtioDevices</div></div></div></foreignObject><text x="2085" y="2784" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">EpollDispatch::ActivateVirtioDevices</text></switch></g><rect x="1970" y="2835" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2850px; margin-left: 1971px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">EpollDispatch::Api</div></div></div></foreignObject><text x="2085" y="2854" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">EpollDispatch::Api</text></switch></g><rect x="1970" y="2905" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2920px; margin-left: 1971px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">EpollDispatch::Debug</div></div></div></foreignObject><text x="2085" y="2924" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">EpollDispatch::Debug</text></switch></g><rect x="2350" y="3030" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3045px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmCreate(config, sender)</div></div></div></foreignObject><text x="2465" y="3049" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmCreate(config, sender)</text></switch></g><rect x="2350" y="3070" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3085px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmDelete(sender)</div></div></div></foreignObject><text x="2465" y="3089" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmDelete(sender)</text></switch></g><path d="M 2580 3135 L 2663.63 3135" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2668.88 3135 L 2661.88 3138.5 L 2663.63 3135 L 2661.88 3131.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="2350" y="3120" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3135px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmBoot(sender)</div></div></div></foreignObject><text x="2465" y="3139" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmBoot(sender)</text></switch></g><rect x="2350" y="3160" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3175px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmShutdown(sender)</div></div></div></foreignObject><text x="2465" y="3179" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmShutdown(sender)</text></switch></g><rect x="2350" y="3220" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3235px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmReboot(sender)</div></div></div></foreignObject><text x="2465" y="3239" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmReboot(sender)</text></switch></g><rect x="2350" y="3270" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3285px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmPause(sender)</div></div></div></foreignObject><text x="2465" y="3289" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmPause(sender)</text></switch></g><rect x="2350" y="3330" width="230" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3345px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmResume(sender)</div></div></div></foreignObject><text x="2465" y="3349" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmResume(sender)</text></switch></g><rect x="2350" y="3390" width="289" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 287px; height: 1px; padding-top: 3405px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmSnapshot(snapshot_data, sender)</div></div></div></foreignObject><text x="2495" y="3409" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmSnapshot(snapshot_data, sender)</text></switch></g><rect x="2350" y="3450" width="259" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 257px; height: 1px; padding-top: 3465px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmRestore(restore_data, sender)</div></div></div></foreignObject><text x="2480" y="3469" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmRestore(restore_data, sender)</text></switch></g><rect x="2350" y="3510" width="259" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 257px; height: 1px; padding-top: 3525px; margin-left: 2351px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">ApiRequest::VmAddFs(add_fs_data, sender)</div></div></div></foreignObject><text x="2480" y="3529" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">ApiRequest::VmAddFs(add_fs_data, sender)</text></switch></g><rect x="625" y="2670" width="365" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 363px; height: 1px; padding-top: 2690px; margin-left: 627px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div><span style="font-size: 12px;">api_sender</span><span style="background-color: initial;">.send(ApiRequest::VmCreate(config, response_sender))</span></div></div></div></div></foreignObject><text x="627" y="2694" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">api_sender.send(ApiRequest::VmCreate(config, response_sender))</text></switch></g><rect x="630" y="2780" width="300" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 2795px; margin-left: 631px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><span style="font-size: 12px;">vm_action(api_evt, api_sender, VmAction::Boot)</span></div></div></div></foreignObject><text x="780" y="2799" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vm_action(api_evt, api_sender, VmAction::Boot)</text></switch></g><path d="M 990 2690 L 1090 2690 L 1090 3040 L 2350 3045" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 930 2795 L 1030 2795 L 1030 3130 L 2350 3135" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1920 1056 L 1920 1030 L 2560 1030 L 2560 1056" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1920 1056 L 1920 1620 L 2560 1620 L 2560 1056" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1920 1056 L 2560 1056" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="18px"><text x="2239.5" y="1053.5">Vm</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-1924-1061-632-504-0)" font-size="18px"><text x="1925.5" y="1079.5">    #[cfg(feature = "tdx")]                                                      </text><text x="1925.5" y="1101.5">    kernel: Option&lt;File&gt;,                                                        </text><text x="1925.5" y="1123.5">    initramfs: Option&lt;File&gt;,                                                     </text><text x="1925.5" y="1145.5">    threads: Vec&lt;thread::JoinHandle&lt;()&gt;&gt;,                                        </text><text x="1925.5" y="1167.5">    device_manager: Arc&lt;Mutex&lt;DeviceManager&gt;&gt;,                                   </text><text x="1925.5" y="1189.5">    config: Arc&lt;Mutex&lt;VmConfig&gt;&gt;,                                                </text><text x="1925.5" y="1211.5">    on_tty: bool,                                                                </text><text x="1925.5" y="1233.5">    signals: Option&lt;Handle&gt;,                                                     </text><text x="1925.5" y="1255.5">    state: RwLock&lt;VmState&gt;,                                                      </text><text x="1925.5" y="1277.5">    cpu_manager: Arc&lt;Mutex&lt;cpu::CpuManager&gt;&gt;,                                    </text><text x="1925.5" y="1299.5">    memory_manager: Arc&lt;Mutex&lt;MemoryManager&gt;&gt;,                                   </text><text x="1925.5" y="1321.5">    #[cfg_attr(not(feature = "kvm"), allow(dead_code))]                          </text><text x="1925.5" y="1343.5">    // The hypervisor abstracted virtual machine.                                </text><text x="1925.5" y="1365.5">    vm: Arc&lt;dyn hypervisor::Vm&gt;,  -----------------------------------------------------------                                               </text><text x="1925.5" y="1387.5">    #[cfg(all(feature = "kvm", target_arch = "x86_64"))]                         </text><text x="1925.5" y="1409.5">    saved_clock: Option&lt;hypervisor::ClockData&gt;,                                  </text><text x="1925.5" y="1431.5">    numa_nodes: NumaNodes,                                                       </text><text x="1925.5" y="1453.5">    seccomp_action: SeccompAction,                                               </text><text x="1925.5" y="1475.5">    exit_evt: EventFd,                                                           </text><text x="1925.5" y="1497.5">    hypervisor: Arc&lt;dyn hypervisor::Hypervisor&gt;,                                 </text><text x="1925.5" y="1519.5">    stop_on_boot: bool,                                                          </text><text x="1925.5" y="1541.5">    load_payload_handle: Option&lt;thread::JoinHandle&lt;Result&lt;EntryPoint&gt;&gt;&gt;,</text></g><path d="M 1920 1564 L 2560 1564" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="1920" y="1568" width="640" height="26" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-1924-1573-632-26-0)" font-size="18px"><text x="1925.5" y="1591.5">fn boot()</text></g><rect x="1920" y="1594" width="640" height="26" fill="#f8cecc" stroke="#b85450" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-1924-1599-632-26-0)" font-size="18px"><text x="1925.5" y="1617.5">fn activate_virtio_devices()</text></g><path d="M 2900 3135 L 2920 3135 L 2920 3330 L 2933.63 3330" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2938.88 3330 L 2931.88 3333.5 L 2933.63 3330 L 2931.88 3326.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="2670" y="3120" width="230" height="30" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3135px; margin-left: 2671px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">self.vm_boot()</div></div></div></foreignObject><text x="2785" y="3139" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">self.vm_boot()</text></switch></g><rect x="3000" y="3105" width="130" height="45" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 128px; height: 1px; padding-top: 3128px; margin-left: 3002px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">let vm = Vm::new()</div></div></div></foreignObject><text x="3002" y="3131" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">let vm = Vm::new()</text></switch></g><path d="M 2900 3135 L 2993.65 3127.98" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2998.89 3127.58 L 2992.17 3131.6 L 2993.65 3127.98 L 2991.64 3124.62 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="2940" y="3300" width="230" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 3330px; margin-left: 2941px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">vm.boot()<br /><br /><b><font color="#ff0000">//create and init vCPUs</font></b></div></div></div></foreignObject><text x="3055" y="3334" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">vm.boot()...</text></switch></g><rect x="3290" y="2890" width="230" height="140" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 228px; height: 1px; padding-top: 2960px; margin-left: 3292px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">#[cfg(feature = "tdx")]<br />let vm = hypervisor.create_vm_with_type()<br /><br />OR<br /><br />#[cfg(not(feature = "tdx"))]<br />let vm = hypervisor.create_vm()</div></div></div></foreignObject><text x="3292" y="2964" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">#[cfg(feature = "tdx")]...</text></switch></g><rect x="3290" y="3050" width="360" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 358px; height: 1px; padding-top: 3075px; margin-left: 3291px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">let memory_manager = MemoryManager::new(&amp;config.lock().unwrap().memory.clone(),)</div></div></div></foreignObject><text x="3470" y="3079" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">let memory_manager = MemoryManager::new(&amp;config.lock().unwra...</text></switch></g><rect x="3290" y="3140" width="360" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 358px; height: 1px; padding-top: 3165px; margin-left: 3291px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">let new_vm = Vm::new_from_memory_manager()</div></div></div></foreignObject><text x="3470" y="3169" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">let new_vm = Vm::new_from_memory_manager()</text></switch></g><path d="M 3130 3130 L 3200 3130 L 3200 2960 L 3283.63 2960" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3288.88 2960 L 3281.88 2963.5 L 3283.63 2960 L 3281.88 2956.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3130 3127.5 L 3200 3130 L 3200 3075 L 3283.63 3075" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3288.88 3075 L 3281.88 3078.5 L 3283.63 3075 L 3281.88 3071.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3610 3285 L 3713.63 3285" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3718.88 3285 L 3711.88 3288.5 L 3713.63 3285 L 3711.88 3281.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3610 3285 L 3665 3285 L 3665 3352.43 L 3713.63 3352.43" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3718.88 3352.43 L 3711.88 3355.93 L 3713.63 3352.43 L 3711.88 3348.93 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="3290" y="3235" width="320" height="100" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 3285px; margin-left: 3291px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>new_vm<span style="background-color: initial;">.device_manager</span><span style="background-color: initial;">.create_devices(serial_pty, console_pty, console_resize_pipe)</span></div><div><span style="background-color: initial;"><br /></span></div><div><span style="background-color: initial;"><b><font color="#ff0000">// virtiofs device is created and inserted to the device tree here</font></b></span></div></div></div></div></foreignObject><text x="3450" y="3289" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">new_vm.device_manager.create_devices(serial_pty, cons...</text></switch></g><path d="M 3130 3128.7 L 3200 3130 L 3200 3165 L 3283.63 3165" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3288.88 3165 L 3281.88 3168.5 L 3283.63 3165 L 3281.88 3161.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3130 3130 L 3200 3130 L 3200 3270 L 3283.63 3270" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3288.88 3270 L 3281.88 3273.5 L 3283.63 3270 L 3281.88 3266.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3960 3296.25 L 4015 3296.29 L 4015 3286.29 L 4063.63 3286.29" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4068.88 3286.29 L 4061.88 3289.79 L 4063.63 3286.29 L 4061.88 3282.79 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="3720" y="3262.5" width="240" height="45" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 3285px; margin-left: 3721px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">virtio_devices.append(&amp;mut self.make_virtio_devices()?)</div></div></div></foreignObject><text x="3840" y="3289" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">virtio_devices.append(&amp;mut self.make_vir...</text></switch></g><rect x="3720" y="3335" width="250" height="35" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 3353px; margin-left: 3721px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">self.add_pci_devices(virtio_devices.clone())?;</div></div></div></foreignObject><text x="3845" y="3356" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">self.add_pci_devices(virtio_devices.clone...</text></switch></g><path d="M 4280 3286.29 L 4310 3286.29 L 4333.63 3286.29" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4338.88 3286.29 L 4331.88 3289.79 L 4333.63 3286.29 L 4331.88 3282.79 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="4070" y="3262.5" width="210" height="47.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 3286px; margin-left: 4071px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">devices.append(&amp;mut self.make_virtio_fs_devices()?);</div></div></div></foreignObject><text x="4175" y="3290" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">devices.append(&amp;mut self.make_virti...</text></switch></g><path d="M 4505 3286.29 L 4527.57 3286.29 L 4543.63 3286.49" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4548.88 3286.56 L 4541.84 3289.97 L 4543.63 3286.49 L 4541.93 3282.97 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="4340" y="3264.38" width="165" height="43.75" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 163px; height: 1px; padding-top: 3286px; margin-left: 4341px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">make_virtio_fs_device(fs_cfg)</div></div></div></foreignObject><text x="4423" y="3290" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">make_virtio_fs_device(fs_cf...</text></switch></g><rect x="4550" y="3265.63" width="247.5" height="41.87" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 246px; height: 1px; padding-top: 3287px; margin-left: 4551px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>let virtio_fs_device = Arc::new(Mutex::new(        <span style="background-color: initial;"> <b><font color="#ff0000">virtio_devices::vhost_user::Fs::new()</font></b></span></div></div></div></div></foreignObject><text x="4674" y="3290" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">let virtio_fs_device = Arc::new(Mutex::ne...</text></switch></g><path d="M 1560 1420 L 1720 1420 L 1720 1050 L 1909.79 1051.2" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1915.04 1051.23 L 1908.02 1054.69 L 1909.79 1051.2 L 1908.06 1047.69 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="3000" y="3190" width="150" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 148px; height: 1px; padding-top: 3215px; margin-left: 3002px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>    self.vm = Some(vm);</div></div></div></div></foreignObject><text x="3002" y="3219" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">    self.vm = Some(vm);</text></switch></g><path d="M 2900 3135 L 2920 3140 L 2920 3220 L 2993.64 3215.4" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2998.88 3215.07 L 2992.12 3219 L 2993.64 3215.4 L 2991.68 3212.01 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2561.92 1364.95 Q 2720 2115 2725 2367.5 Q 2730 2620 3280.98 2897.53" fill="none" stroke="rgb(0, 0, 0)" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><path d="M 3287 2900.57 L 3276.94 2900.54 L 3280.98 2897.53 L 3280.99 2892.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><rect x="4930" y="3186.57" width="528.75" height="33.43" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 527px; height: 1px; padding-top: 3203px; margin-left: 4931px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">let mut vu = VhostUserHandle::connect_vhost_user(false, path, num_queues as u64, false)?;</div></div></div></foreignObject><text x="5194" y="3207" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">let mut vu = VhostUserHandle::connect_vhost_user(false, path, num_queues as u64, false)?;</text></switch></g><path d="M 1870 2680 L 1965.5 2584.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1969.21 2580.79 L 1966.73 2588.22 L 1965.5 2584.5 L 1961.78 2583.27 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1870 2680 L 1964.09 2642.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1968.96 2640.42 L 1963.76 2646.26 L 1964.09 2642.37 L 1961.16 2639.77 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1870 2680 L 1963.9 2708.17" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1968.93 2709.68 L 1961.22 2711.02 L 1963.9 2708.17 L 1963.23 2704.31 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1870 2680 L 1965.5 2775.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1969.21 2779.21 L 1961.78 2776.73 L 1965.5 2775.5 L 1966.73 2771.78 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1870 2680 L 1966.77 2844.51" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1969.43 2849.04 L 1962.87 2844.78 L 1966.77 2844.51 L 1968.9 2841.23 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1870 2680 L 1967.55 2914.12" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 1969.57 2918.97 L 1963.65 2913.85 L 1967.55 2914.12 L 1970.11 2911.16 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2323 3010 L 2300 3010 L 2300 3550 L 2323 3550" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2323 3010 L 2650 3010 L 2650 3550 L 2323 3550" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2323 3010 L 2323 3550" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px" transform="rotate(-90,2311.5,3280)"><text x="2311" y="3284.5">EpollDispatch::Api</text></g><path d="M 2200 2842.5 L 2474.54 3006.73" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2479.04 3009.43 L 2471.24 3008.84 L 2474.54 3006.73 L 2474.83 3002.83 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 5540 296 L 5540 270 L 6110 270 L 6110 296" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 5540 296 L 5540 524 L 6110 524 L 6110 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 5540 296 L 6110 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="5824.5" y="287.5">Fs</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-5544-301-562-194-0)" font-size="12px"><text x="5545.5" y="313.5">    common: VirtioCommon,                                                           </text><text x="5545.5" y="327.5">    vu_common: VhostUserCommon,                                                  </text><text x="5545.5" y="341.5">    id: String,                                                                  </text><text x="5545.5" y="355.5">    config: VirtioFsConfig,                                                      </text><text x="5545.5" y="369.5">    // Hold ownership of the memory that is allocated for the device                </text><text x="5545.5" y="383.5">    // which will be automatically dropped when the device is dropped               </text><text x="5545.5" y="397.5">    cache: Option&lt;(VirtioSharedMemoryList, MmapRegion)&gt;,                         </text><text x="5545.5" y="411.5">    slave_req_support: bool,       //  true in DAX window mode                                             </text><text x="5545.5" y="425.5">    seccomp_action: SeccompAction,                                                  </text><text x="5545.5" y="439.5">    guest_memory: Option&lt;GuestMemoryAtomic&lt;GuestMemoryMmap&gt;&gt;,                    </text><text x="5545.5" y="453.5">    epoll_thread: Option&lt;thread::JoinHandle&lt;()&gt;&gt;,                                </text><text x="5545.5" y="467.5">    exit_evt: EventFd,                                                              </text><text x="5545.5" y="481.5">    iommu: bool, </text></g><path d="M 5540 494 L 6110 494" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="5540" y="498" width="570" height="26" fill="#a0522d" stroke="#6d1f00" pointer-events="none"/><g fill="#ffffff" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-5544-503-562-26-0)" font-size="12px"><text x="5545.5" y="515.5">fn activate()</text></g><rect x="5310" y="260" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 285px; margin-left: 5365px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;">«trait»<br />VirtioDevice</div></div></div></foreignObject><text x="5365" y="289" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">«trait»...</text></switch></g><path d="M 5420 285 L 5525.88 285.44" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 5538.88 285.49 L 5525.86 291.94 L 5525.91 278.94 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6240 26 L 6240 0 L 6590 0 L 6590 26" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6240 26 L 6240 244 L 6590 244 L 6590 26" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6240 26 L 6590 26" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="6414.5" y="17.5">VirtioCommon</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6244-31-342-184-0)" font-size="12px"><text x="6245.5" y="43.5">    pub avail_features: u64,                                                     </text><text x="6245.5" y="57.5">    pub acked_features: u64,                                                     </text><text x="6245.5" y="71.5">    pub kill_evt: Option&lt;EventFd&gt;,                                               </text><text x="6245.5" y="85.5">    pub interrupt_cb: Option&lt;Arc&lt;dyn VirtioInterrupt&gt;&gt;,                          </text><text x="6245.5" y="99.5">    pub pause_evt: Option&lt;EventFd&gt;,                                              </text><text x="6245.5" y="113.5">    pub paused: Arc&lt;AtomicBool&gt;,                                                 </text><text x="6245.5" y="127.5">    pub paused_sync: Option&lt;Arc&lt;Barrier&gt;&gt;,                                       </text><text x="6245.5" y="141.5">    pub epoll_threads: Option&lt;Vec&lt;thread::JoinHandle&lt;()&gt;&gt;&gt;,                      </text><text x="6245.5" y="155.5">    pub queue_sizes: Vec&lt;u16&gt;,                                                   </text><text x="6245.5" y="169.5">    pub device_type: u32,                                                        </text><text x="6245.5" y="183.5">    pub min_queues: u16,                                                         </text><text x="6245.5" y="197.5">    pub access_platform: Option&lt;Arc&lt;dyn AccessPlatform&gt;&gt;,                        </text></g><path d="M 6240 214 L 6590 214" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6244-223-342-26-0)" font-size="12px"><text x="6245.5" y="235.5">+ method(type): type</text></g><path d="M 6112.28 307.45 L 6175 307.43 L 6175 10 L 6231.88 10" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6238.88 10 L 6231.88 13.5 L 6231.88 6.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 314px; margin-left: 6114px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="6114" y="325" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 306px; margin-left: 6114px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="6114" y="306" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">1</text></switch></g><path d="M 6660 296 L 6660 270 L 6960 270 L 6960 296" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6660 296 L 6660 424 L 6960 424 L 6960 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6660 296 L 6960 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="6809.5" y="287.5">VhostUserCommon</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6664-301-292-94-0)" font-size="12px"><text x="6665.5" y="313.5">    pub vu: Option&lt;Arc&lt;Mutex&lt;VhostUserHandle&gt;&gt;&gt;,                                 </text><text x="6665.5" y="327.5">    pub acked_protocol_features: u64,                                            </text><text x="6665.5" y="341.5">    pub socket_path: String,                                                     </text><text x="6665.5" y="355.5">    pub vu_num_queues: usize,                                                    </text><text x="6665.5" y="369.5">    pub migration_started: bool,                                                 </text><text x="6665.5" y="383.5">    pub server: bool,</text></g><path d="M 6660 394 L 6960 394" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="6660" y="398" width="300" height="26" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6664-403-292-26-0)" font-size="12px"><text x="6665.5" y="415.5">fn activate()</text></g><path d="M 6110 318.89 L 6385 318.86 L 6385 280 L 6651.88 280.01" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6658.88 280.01 L 6651.88 283.51 L 6651.88 276.51 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 326px; margin-left: 6112px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="6112" y="337" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 317px; margin-left: 6112px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="6112" y="317" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">1</text></switch></g><path d="M 7040 296 L 7040 270 L 7280 270 L 7280 296" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7040 296 L 7040 444 L 7280 444 L 7280 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7040 296 L 7280 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="7159.5" y="287.5">VhostUserHandle</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-7044-301-232-114-0)" font-size="12px"><text x="7045.5" y="313.5">    vu: Master,                                                                  </text><text x="7045.5" y="327.5">    ready: bool,                                                                 </text><text x="7045.5" y="341.5">    supports_migration: bool,                                                    </text><text x="7045.5" y="355.5">    shm_log: Option&lt;Arc&lt;MmapRegion&gt;&gt;,                                            </text><text x="7045.5" y="369.5">    acked_features: u64,                                                         </text><text x="7045.5" y="383.5">    vrings_info: Option&lt;Vec&lt;VringInfo&gt;&gt;,                                         </text><text x="7045.5" y="397.5">    queue_indexes: Vec&lt;usize&gt;,</text></g><path d="M 7040 414 L 7280 414" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="7040" y="418" width="240" height="26" fill="#ffff88" stroke="#36393d" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-7044-423-232-26-0)" font-size="12px"><text x="7045.5" y="435.5">fn setup_vhost_user()</text></g><path d="M 6962.4 312.26 L 7000 312.29 L 7000 282.14 L 7030.92 282.17" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7037.92 282.18 L 7030.92 285.67 L 7030.93 278.67 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 319px; margin-left: 6964px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="6964" y="330" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 311px; margin-left: 6964px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="6964" y="311" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">1</text></switch></g><path d="M 7400 296 L 7400 270 L 7620 270 L 7620 296" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7400 296 L 7400 356 L 7620 356 L 7620 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7400 296 L 7620 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="7509.5" y="287.5">Master</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-7404-301-212-26-0)" font-size="12px"><text x="7405.5" y="313.5">    node: Arc&lt;Mutex&lt;MasterInternal&gt;&gt;,</text></g><path d="M 7400 326 L 7620 326" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-7404-335-212-26-0)" font-size="12px"><text x="7405.5" y="347.5">+ method(type): type</text></g><path d="M 7747 296 L 7747 270 L 8120 270 L 8120 296" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7747 296 L 7747 594 L 8120 594 L 8120 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7747 296 L 8120 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="7933" y="287.5">MasterInternal</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-7751-301-365-264-0)" font-size="12px"><text x="7752.5" y="313.5">    // Used to send requests to the slave.                                       </text><text x="7752.5" y="327.5">    main_sock: Endpoint&lt;MasterReq&gt;,                                              </text><text x="7752.5" y="341.5">    // Cached virtio features from the slave.                                    </text><text x="7752.5" y="355.5">    virtio_features: u64,                                                        </text><text x="7752.5" y="369.5">    // Cached acked virtio features from the driver.                             </text><text x="7752.5" y="383.5">    acked_virtio_features: u64,                                                  </text><text x="7752.5" y="397.5">    // Cached vhost-user protocol features from the slave.                       </text><text x="7752.5" y="411.5">    protocol_features: u64,                                                      </text><text x="7752.5" y="425.5">    // Cached vhost-user protocol features.                                      </text><text x="7752.5" y="439.5">    acked_protocol_features: u64,                                                </text><text x="7752.5" y="453.5">    // Cached vhost-user protocol features are ready to use.                     </text><text x="7752.5" y="467.5">    protocol_features_ready: bool,                                               </text><text x="7752.5" y="481.5">    // Cached maxinum number of queues supported from the slave.                 </text><text x="7752.5" y="495.5">    max_queue_num: u64,                                                          </text><text x="7752.5" y="509.5">    // Internal flag to mark failure state.                                      </text><text x="7752.5" y="523.5">    error: Option&lt;i32&gt;,                                                          </text><text x="7752.5" y="537.5">    // List of header flags.                                                     </text><text x="7752.5" y="551.5">    hdr_flags: VhostUserHeaderFlag,</text></g><path d="M 7747 564 L 8120 564" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-7751-573-365-26-0)" font-size="12px"><text x="7752.5" y="585.5">+ method(type): type</text></g><path d="M 7280.72 305.58 L 7340 305.57 L 7340 280.14 L 7391.66 280.22" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7398.66 280.23 L 7391.66 283.72 L 7391.67 276.72 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 313px; margin-left: 7283px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="7283" y="324" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 304px; margin-left: 7283px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="7283" y="304" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">1</text></switch></g><path d="M 7620 309 L 7683.57 309 L 7683.57 281.29 L 7739.63 281.33" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7746.63 281.34 L 7739.63 284.83 L 7739.63 277.83 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 316px; margin-left: 7622px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="7622" y="327" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 307px; margin-left: 7622px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="7622" y="307" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">1</text></switch></g><path d="M 8220 296 L 8220 270 L 8380 270 L 8380 296" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 8220 296 L 8220 374 L 8380 374 L 8380 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 8220 296 L 8380 296" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="8299.5" y="287.5">Endpoint&lt;R: Req&gt;</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-8224-301-152-44-0)" font-size="12px"><text x="8225.5" y="313.5">    sock: UnixStream,                                                               </text><text x="8225.5" y="327.5">    _r: PhantomData&lt;R&gt;,</text></g><path d="M 8220 344 L 8380 344" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-8224-353-152-26-0)" font-size="12px"><text x="8225.5" y="365.5">+ method(type): type</text></g><path d="M 8123.73 322.4 L 8170 322.43 L 8170 280 L 8211.88 279.99" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 8218.88 279.98 L 8211.88 283.49 L 8211.88 276.49 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 329px; margin-left: 8126px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="8126" y="340" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 321px; margin-left: 8126px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="8126" y="321" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">1</text></switch></g><rect x="8290" y="140" width="110" height="50" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 165px; margin-left: 8345px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;">«trait»<br /><b>Req</b></div></div></div></foreignObject><text x="8345" y="169" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">«trait»...</text></switch></g><path d="M 8340.4 263.64 L 8344.6 196.36" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 8340.07 268.88 L 8337.01 261.68 L 8340.4 263.64 L 8344 262.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 8344.93 191.12 L 8347.99 198.32 L 8344.6 196.36 L 8341 197.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6480 536 L 6480 510 L 6970 510 L 6970 536" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6480 536 L 6480 790 L 6970 790 L 6970 536" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6480 536 L 6970 536" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="18px"><text x="6724.5" y="533.5">VhostUserEpollHandler&lt;S: VhostUserMasterReqHandler&gt;</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6484-541-482-194-0)" font-size="12px"><text x="6485.5" y="553.5">    pub vu: Arc&lt;Mutex&lt;VhostUserHandle&gt;&gt;,                                         </text><text x="6485.5" y="567.5">    pub mem: GuestMemoryAtomic&lt;GuestMemoryMmap&gt;,                                 </text><text x="6485.5" y="581.5">    pub kill_evt: EventFd,                                                       </text><text x="6485.5" y="595.5">    pub pause_evt: EventFd,                                                      </text><text x="6485.5" y="609.5">    pub queues: Vec&lt;(usize, Queue, EventFd)&gt;,                                    </text><text x="6485.5" y="623.5">    pub virtio_interrupt: Arc&lt;dyn VirtioInterrupt&gt;,                              </text><text x="6485.5" y="637.5">    pub acked_features: u64,                                                     </text><text x="6485.5" y="651.5">    pub acked_protocol_features: u64,                                            </text><text x="6485.5" y="665.5">    pub socket_path: String,                                                     </text><text x="6485.5" y="679.5">    pub server: bool,                                                            </text><text x="6485.5" y="693.5">    pub slave_req_handler: Option&lt;MasterReqHandler&lt;S&gt;&gt;,                          </text><text x="6485.5" y="707.5">    pub inflight: Option&lt;Inflight&gt;,</text></g><path d="M 6480 734 L 6970 734" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="6480" y="738" width="490" height="26" fill="#76608a" stroke="#432d57" pointer-events="none"/><g fill="#ffffff" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6484-743-482-26-0)" font-size="12px"><text x="6485.5" y="755.5">fn run()</text></g><rect x="6480" y="764" width="490" height="26" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6484-769-482-26-0)" font-size="12px"><text x="6485.5" y="781.5">fn handle_event()</text></g><path d="M 6975.88 547.25 L 6975.86 552 L 7000 552 L 7000 289.14 L 7028.76 289.14" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7035.76 289.14 L 7028.76 292.64 L 7028.76 285.64 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 554px; margin-left: 6978px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="6978" y="572" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 546px; margin-left: 6978px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="6978" y="546" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">1</text></switch></g><rect x="6210" y="510" width="190" height="100" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 100px; padding-top: 510px; margin-left: 6210px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 190px; height: 100px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br /><b>EpollHelperHandler</b><br /></p><hr size="1" /><p style="margin:0px;margin-left:4px;">fn handle_event()</p><p style="margin:0px;margin-left:4px;">fn handle_timeout()<br /></p><p style="margin:0px;margin-left:4px;">fn event_list()<br /></p></div></div></div></foreignObject><text x="6210" y="522" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">&lt;&lt;Interface&gt;&gt;...</text></switch></g><path d="M 6400 535 L 6440 535 L 6440 525.43 L 6468.94 525.41" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6475.94 525.4 L 6468.94 528.91 L 6468.94 521.91 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 542px; margin-left: 6402px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="6402" y="560" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 533px; margin-left: 6402px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="6402" y="533" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">1</text></switch></g><path d="M 7420 672 L 7420 646 L 8160 646 L 8160 672" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7420 672 L 7420 850 L 8160 850 L 8160 672" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7420 672 L 8160 672" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="18px"><text x="7789.5" y="669.5">MasterReqHandler&lt;S: VhostUserMasterReqHandler&gt;</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-7424-677-732-144-0)" font-size="12px"><text x="7425.5" y="689.5">    // underlying Unix domain socket for communication                           </text><text x="7425.5" y="703.5">    sub_sock: Endpoint&lt;SlaveReq&gt;,                                                   </text><text x="7425.5" y="717.5">    tx_sock: UnixStream,                                                         </text><text x="7425.5" y="731.5">    // Protocol feature VHOST_USER_PROTOCOL_F_REPLY_ACK has been negotiated.     </text><text x="7425.5" y="745.5">    reply_ack_negotiated: bool,                                                     </text><text x="7425.5" y="759.5">    // the VirtIO backend device object                                          </text><text x="7425.5" y="773.5">    backend: Arc&lt;S&gt;,                                                             </text><text x="7425.5" y="787.5">    // whether the endpoint has encountered any failure                          </text><text x="7425.5" y="801.5">    error: Option&lt;i32&gt;,</text></g><path d="M 7420 820 L 8160 820" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-7424-829-732-26-0)" font-size="18px"><text x="7425.5" y="847.5">+ method(type): type</text></g><path d="M 6970.98 686.93 L 7195 686.86 L 7195 657.57 L 7412.62 657.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7419.62 657.63 L 7412.62 661.13 L 7412.62 654.13 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 694px; margin-left: 6973px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="6973" y="712" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 685px; margin-left: 6973px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="6973" y="685" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="18px">1</text></switch></g><rect x="7420" y="870" width="190" height="180" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 180px; padding-top: 870px; margin-left: 7420px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 190px; height: 180px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br /><b>VhostUserMasterReqHandler</b></p><hr size="1" /><p style="margin:0px;margin-left:4px;">fn handle_config_change()<br /></p><p style="margin:0px;margin-left:4px;">fn fs_slave_map()<br /></p><p style="margin:0px;margin-left:4px;">fn fs_slave_unmap()<br /></p><p style="margin:0px;margin-left:4px;">fn fs_slave_sync()<br /></p><p style="margin:0px;margin-left:4px;">fn fs_slave_io()<br /></p></div></div></div></foreignObject><text x="7420" y="882" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">&lt;&lt;Interface&gt;&gt;...</text></switch></g><path d="M 6830 857 L 6830 831 L 7140 831 L 7140 857" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6830 857 L 6830 965 L 7140 965 L 7140 857" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6830 857 L 7140 857" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="6984.5" y="848.5">SlaveReqHandler</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6834-862-302-74-0)" font-size="12px"><text x="6835.5" y="874.5">    cache_offset: GuestAddress,                                                  </text><text x="6835.5" y="888.5">    cache_size: u64,                                                             </text><text x="6835.5" y="902.5">    mmap_cache_addr: u64,                                                        </text><text x="6835.5" y="916.5">    mem: GuestMemoryAtomic&lt;GuestMemoryMmap&gt;,</text></g><path d="M 6830 935 L 7140 935" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-6834-944-302-26-0)" font-size="12px"><text x="6835.5" y="956.5">+ method(type): type</text></g><path d="M 7420 770 L 7280 770 L 7280 840 L 7151.12 840" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 7144.12 840 L 7151.12 836.5 L 7151.12 843.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 777px; margin-left: 7422px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="7422" y="789" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 768px; margin-left: 7422px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="7422" y="768" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">1</text></switch></g><path d="M 7420.38 895.02 L 7280 870 L 7155.98 843.71" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 7143.26 841.01 L 7157.33 837.35 L 7154.63 850.07 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="4930" y="3290" width="680" height="33.43" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 678px; height: 1px; padding-top: 3307px; margin-left: 4931px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">let (acked_features, acked_protocol_features) = vu.negotiate_features_vhost_user(avail_features, avail_protocol_features)?;</div></div></div></foreignObject><text x="5270" y="3310" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">let (acked_features, acked_protocol_features) = vu.negotiate_features_vhost_user(avail_features, avail_protocol_f...</text></switch></g><rect x="4930" y="3370" width="530" height="460" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3600px; margin-left: 4932px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;"><div>Ok(Fs {                                                                          </div><div>    common: VirtioCommon {                                                          </div><div>        device_type: VirtioDeviceType::Fs as u32,                                   </div><div>        avail_features: acked_features,                                          </div><div>        // If part of the available features that have been acked, the           </div><div>        // PROTOCOL_FEATURES bit must be already set through the VIRTIO          </div><div>        // acked features as we know the guest would never ack it, thus          </div><div>        // the feature would be lost.                                            </div><div>        acked_features: acked_features &amp; VhostUserVirtioFeatures::PROTOCOL_FEATURES.bits(),</div><div>        queue_sizes: vec![queue_size; num_queues],                               </div><div>        paused_sync: Some(Arc::new(Barrier::new(2))),                            </div><div>        min_queues: 1,                                                           </div><div>        ..Default::default()                                                     </div><div>    },                                                                           </div><div>    vu_common: VhostUserCommon {                                                 </div><div>        vu: Some(Arc::new(Mutex::new(vu))),                                         </div><div>        acked_protocol_features,                                                 </div><div>        socket_path: path.to_string(),                                           </div><div>        vu_num_queues: num_queues,                                               </div><div>        ..Default::default()                                                     </div><div>    },                                                                           </div><div>    id,                                                                          </div><div>    config,                                                                      </div><div>    cache,                                                                       </div><div>    slave_req_support,                                                           </div><div>    seccomp_action,                                                              </div><div>    guest_memory: None,                                                          </div><div>    epoll_thread: None,                                                          </div><div>    exit_evt,                                                                    </div><div>    iommu,                                                                       </div><div>})</div></div></div></div></foreignObject><text x="4932" y="3604" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">Ok(Fs {...</text></switch></g><path d="M 4797.5 3286.57 L 4924.61 3206.67" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4929.05 3203.88 L 4924.99 3210.57 L 4924.61 3206.67 L 4921.26 3204.64 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4797.5 3286.57 L 4923.7 3305.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4928.89 3306.55 L 4921.45 3308.95 L 4923.7 3305.76 L 4922.5 3302.03 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4797.5 3286.57 L 4925 3387.1" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4929.12 3390.35 L 4921.46 3388.77 L 4925 3387.1 L 4925.79 3383.27 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2510 2780 L 2583.63 2780" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2588.88 2780 L 2581.88 2783.5 L 2583.63 2780 L 2581.88 2776.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="2280" y="2765" width="230" height="30" fill="#f8cecc" stroke="#b85450" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 2780px; margin-left: 2281px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">self.vm.activate_virtio_devices()</div></div></div></foreignObject><text x="2395" y="2784" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">self.vm.activate_virtio_devices()</text></switch></g><rect x="2590" y="2765" width="260" height="30" fill="#6a00ff" stroke="#3700cc" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 2780px; margin-left: 2591px;"><div data-drawio-colors="color: #ffffff; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">self.device_manager.activate_virtio_devices()</div></div></div></foreignObject><text x="2720" y="2784" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">self.device_manager.activate_virtio_devices...</text></switch></g><path d="M 2830 1056 L 2830 1030 L 3200 1030 L 3200 1056" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2830 1056 L 2830 1304 L 3200 1304 L 3200 1056" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2830 1056 L 3200 1056" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" pointer-events="none" text-anchor="middle" font-size="12px"><text x="3014.5" y="1047.5">DeviceManager</text></g><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-2834-1061-362-214-0)" font-size="12px"><text x="2835.5" y="1073.5">hypervisor_type: HypervisorType,</text><text x="2835.5" y="1087.5">address_manager: Arc&lt;AddressManager&gt;,</text><text x="2835.5" y="1101.5">interrupt_controller: Option&lt;Arc&lt;Mutex&lt;ioapic::Ioapic&gt;&gt;&gt;,</text><text x="2835.5" y="1115.5">config: Arc&lt;Mutex&lt;VmConfig&gt;&gt;,</text><text x="2835.5" y="1129.5">memory_manager: Arc&lt;Mutex&lt;MemoryManager&gt;&gt;,</text><text x="2835.5" y="1157.5">virtio_devices: Vec&lt;MetaVirtioDevice&gt;,</text><text x="2835.5" y="1171.5">bus_devices: Vec&lt;Arc&lt;Mutex&lt;dyn BusDevice&gt;&gt;&gt;,</text><text x="2835.5" y="1185.5">msi_interrupt_manager</text><text x="2835.5" y="1213.5">device_tree: Arc&lt;Mutex&lt;DeviceTree&gt;&gt;,</text><text x="2835.5" y="1227.5">activate_evt: EventFd,</text><text x="2835.5" y="1255.5">pending_activations: Arc&lt;Mutex&lt;Vec&lt;VirtioPciDeviceActivator&gt;&gt;&gt;,</text></g><path d="M 2830 1274 L 3200 1274" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="2830" y="1278" width="370" height="26" fill="#6a00ff" stroke="#3700cc" pointer-events="none"/><g fill="#ffffff" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-2834-1283-362-26-0)" font-size="12px"><text x="2835.5" y="1295.5">fn activate_virtio_devices()</text></g><path d="M 2565.12 1160.83 L 2695 1160.86 L 2695 1042.14 L 2821.51 1042.06" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2828.51 1042.06 L 2821.51 1045.56 L 2821.51 1038.56 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1168px; margin-left: 2567px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">name</div></div></div></foreignObject><text x="2567" y="1179" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">name</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1159px; margin-left: 2567px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="2567" y="1159" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">1</text></switch></g><path d="M 3250 2385 L 4025 2385 L 4025 1716.37" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4025 1711.12 L 4028.5 1718.12 L 4025 1716.37 L 4021.5 1718.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="2990" y="2370" width="260" height="30" fill="#a0522d" stroke="#6d1f00" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 2385px; margin-left: 2991px;"><div data-drawio-colors="color: #ffffff; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">fs.activate()</div></div></div></foreignObject><text x="3120" y="2389" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">fs.activate()</text></switch></g><path d="M 2854.88 2781.2 L 2845.45 2777.86 L 2978.77 2401.71 L 2968.88 2398.2 L 2989.83 2385.47 L 2998.1 2408.56 L 2988.2 2405.05 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3650 1995 L 3722.43 1995 L 3722.43 1982.57 L 3788.63 1982.57" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3793.88 1982.57 L 3786.88 1986.07 L 3788.63 1982.57 L 3786.88 1979.07 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="3400" y="1870" width="250" height="250" fill="url(#mx-gradient-f5f5f5-1-b3b3b3-1-s-0)" stroke="#666666" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 248px; height: 1px; padding-top: 1995px; margin-left: 3402px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>let mut handler = self.vu_common.activate(                                       </div><div>    mem,                                                                            </div><div style="">    queues,                                                                      </div><div style="">    interrupt_cb,                                                                </div><div>    self.common.acked_features,                                                  </div><div>    slave_req_handler,   // = NULL if not DAX                                                        </div><div>    kill_evt,                                                                    </div><div>    pause_evt,                                                                   </div><div>)?;</div></div></div></div></foreignObject><text x="3402" y="1999" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">let mut handler = self.vu_common.activate...</text></switch></g><path d="M 4110 1452.48 L 4190 1452.57 L 4208.63 1452.57" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4213.88 1452.57 L 4206.88 1456.07 L 4208.63 1452.57 L 4206.88 1449.07 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4110 1492.5 L 4110 1450 L 4163 1450 L 4163 1643 L 4208.63 1643" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4213.88 1643 L 4206.88 1646.5 L 4208.63 1643 L 4206.88 1639.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="3940" y="1420" width="170" height="290" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 168px; height: 1px; padding-top: 1565px; margin-left: 3942px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>spawn_virtio_thread(                                                             </div><div>    &amp;self.id,                                                                    </div><div>    &amp;self.seccomp_action,                                                        </div><div>    Thread::VirtioVhostFs,                                                       </div><div>    &amp;mut epoll_threads,                                                          </div><div>    &amp;self.exit_evt,                                                              </div><div>    move || handler.run(paused, paused_sync.unwrap()),                           </div><div>)?;</div></div></div></div></foreignObject><text x="3942" y="1569" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">spawn_virtio_thread(...</text></switch></g><rect x="3430" y="2625" width="260" height="30" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 2640px; margin-left: 3431px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">self.epoll_thread = Some(epoll_threads.remove(0));</div></div></div></foreignObject><text x="3560" y="2644" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">self.epoll_thread = Some(epoll_threads.remo...</text></switch></g><path d="M 3250 2392.5 L 3426.25 2634.85" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3429.34 2639.1 L 3422.39 2635.49 L 3426.25 2634.85 L 3428.06 2631.38 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3250 2385 L 3397.71 2000.94" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 3399.6 1996.04 L 3400.35 2003.83 L 3397.71 2000.94 L 3393.82 2001.32 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4430.22 1534.28 L 4495 1534.29 L 4495 1500 L 4553.63 1500" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4558.88 1500 L 4551.88 1503.5 L 4553.63 1500 L 4551.88 1496.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="4215" y="1420" width="215" height="175" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 213px; height: 1px; padding-top: 1508px; margin-left: 4217px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>thread::Builder::new()                                                       </div><div>        .name(name.to_string())                                                  </div><div>        .spawn(move || {</div><div>                     .......</div><div> ---------------- &gt;  f()    // the last arg of</div><div>                           // spawn_virtio_thread</div><div>                     .......</div><div>         })</div></div></div></div></foreignObject><text x="4217" y="1511" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">thread::Builder::new()...</text></switch></g><rect x="4215" y="1615" width="165" height="55" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 163px; height: 1px; padding-top: 1643px; margin-left: 4217px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">epoll_threads.push(thread)</div></div></div></foreignObject><text x="4217" y="1646" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">epoll_threads.push(thread)</text></switch></g><path d="M 4110 1637.5 L 4213.93 1530.78" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 4922.5 1500 L 5021.86 1500 L 5021.86 1385 L 5114.88 1385" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 5120.13 1385 L 5113.13 1388.5 L 5114.88 1385 L 5113.13 1381.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="4560" y="1470" width="362.5" height="60" fill="#76608a" stroke="#432d57" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 360px; height: 1px; padding-top: 1500px; margin-left: 4562px;"><div data-drawio-colors="color: #ffffff; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">VhostUserEpollHandler&lt;S: VhostUserMasterReqHandler&gt;::run()</div></div></div></foreignObject><text x="4562" y="1504" fill="#ffffff" font-family="Helvetica" font-size="12px">VhostUserEpollHandler&lt;S: VhostUserMasterReqHandler&gt;::run()</text></switch></g><rect x="5121.25" y="1260" width="378.75" height="250" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 377px; height: 1px; padding-top: 1385px; margin-left: 5123px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><div>let mut helper = EpollHelper::new(&amp;self.kill_evt, &amp;self.pause_evt)?;             </div><div>helper.add_event_custom(                                                         </div><div>    self.vu.lock().unwrap().socket_handle().as_raw_fd(),                         </div><div>    HUP_CONNECTION_EVENT,                                                        </div><div>    epoll::Events::EPOLLHUP,                                                     </div><div>)?;                                                                              </div><div>                                                                                 </div><div>if let Some(slave_req_handler) = &amp;self.slave_req_handler {                       </div><div>    helper.add_event(slave_req_handler.as_raw_fd(), SLAVE_REQ_EVENT)?;           </div><div>}                                                                                </div><div>                                                                                 </div><div>helper.run(paused, paused_sync, self)?;                                          </div><div><br /></div></div></div></div></foreignObject><text x="5123" y="1389" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">let mut helper = EpollHelper::new(&amp;self.kill_evt, &amp;self.pause_e...</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1455px; margin-left: 4741px;"><div data-drawio-colors="color: #FF3333; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 51, 51); line-height: 1.2; pointer-events: none; white-space: nowrap;">use epoll to listen kill and pause from vmm thread and connection msg from virtiofsd</div></div></div></foreignObject><text x="4741" y="1459" fill="#FF3333" font-family="Helvetica" font-size="12px" text-anchor="middle">use epoll to listen kill and pause from vmm thread and connection msg from vir...</text></switch></g><rect x="5600" y="1430" width="210" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 1460px; margin-left: 5601px;"><div data-drawio-colors="color: #FF3333; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 51, 51); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><font color="#000000"><span style="text-align: left;">EpollHelper::</span>run_with_timeout()</font></div></div></div></foreignObject><text x="5705" y="1464" fill="#FF3333" font-family="Helvetica" font-size="12px" text-anchor="middle">EpollHelper::run_with_timeout()</text></switch></g><path d="M 5503.19 1487.39 L 5500.82 1476.89 L 5575.76 1459.96 L 5573.45 1449.71 L 5599.51 1460.11 L 5580.45 1480.7 L 5578.14 1470.46 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6370 1460 L 6415 1460 L 6415 1500 L 6453.63 1500" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6458.88 1500 L 6451.88 1503.5 L 6453.63 1500 L 6451.88 1496.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6370 1460 L 6415 1460 L 6415 1400 L 6453.63 1400" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 6458.88 1400 L 6451.88 1403.5 L 6453.63 1400 L 6451.88 1396.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><rect x="6010" y="1430" width="360" height="60" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 358px; height: 1px; padding-top: 1460px; margin-left: 6011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><span style="text-align: left;"><font color="#000000">VhostUserEpollHandler&lt;S: VhostUserMasterReqHandler&gt;::handle_event()</font></span></div></div></div></foreignObject><text x="6190" y="1464" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">VhostUserEpollHandler&lt;S: VhostUserMasterReqHandler&gt;::handle_...</text></switch></g><path d="M 5810 1460 L 6007.76 1460" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 6001.88 1463.5 L 6008.88 1460 L 6001.88 1456.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1457px; margin-left: 5910px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;">for not kill and pause cases</div></div></div></foreignObject><text x="5910" y="1457" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">for not kill and pause cases</text></switch></g><rect x="6460" y="1470" width="180" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 1500px; margin-left: 6461px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">SLAVE_REQ_EVENT</div></div></div></foreignObject><text x="6550" y="1504" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">SLAVE_REQ_EVENT</text></switch></g><rect x="6460" y="1370" width="180" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 1400px; margin-left: 6461px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">HUP_CONNECTION_EVENT</div></div></div></foreignObject><text x="6550" y="1404" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">HUP_CONNECTION_EVENT</text></switch></g><rect x="3795" y="1965" width="165" height="35" fill="#ffff88" stroke="#36393d" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 163px; height: 1px; padding-top: 1983px; margin-left: 3797px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">self.vu.setup_vhost_user()</div></div></div></foreignObject><text x="3797" y="1986" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">self.vu.setup_vhost_user()</text></switch></g><path d="M 3830 1190 L 4060 1190 L 4060 1205 L 4050 1220 L 3830 1220 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 4060 1190 L 6720 1190 L 6720 1750 L 3830 1750 L 3830 1220" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1205px; margin-left: 3831px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><span style="font-size: 18px;"><b>virtio device thread<br /></b></span></div></div></div></foreignObject><text x="3945" y="1209" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">virtio device thread&#xa;</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1940px; margin-left: 3915px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 18px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: nowrap;"><b><font color="#ff3333" style="font-size: 23px;">this is the most important part of fs vhost user</font></b></div></div></div></foreignObject><text x="3915" y="1945" fill="#000000" font-family="Helvetica" font-size="18px" text-anchor="middle">this is the most important part of fs vhost user</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>